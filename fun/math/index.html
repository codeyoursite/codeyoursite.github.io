<!doctype html>
<html>
<head>
	<title>Maths Game</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body style="padding: 10px;">
	<h1 id="hOne">Maths Game</h1>
	<form id="first">
		<label for="first">What's 12 x 13?</label>
		<input type="text" name="first" id="firstq">
		<input type="submit" value="Check">
	</form>
	<form id="second" style="display: none;">
		<label for="second">What's 14 squared?</label>
		<input type="text" name="second" id="secondq">
		<input type="submit" value="Check">
	</form>
	<form id="third" style="display: none;">
		<label for="third">What's 15 squared?</label>
		<input type="text" name="third" id="thirdq">
		<input type="submit" value="Check">
	</form>
	<form id="fourth" style="display: none;">
		<label for="fourth">What's 12 - -6?</label>
		<input type="text" name="fourth" id="fourthq">
		<input type="submit" value="Check">
	</form>
	<form id="fifth" style="display: none;">
		<label for="fifth">What's 20 x 21?</label>
		<input type="text" name="fifth" id="fifthq">
		<input type="submit" value="Check">
	</form>
	<div id="iframe-wrapper" style="display: none; height: 70vh; width: 70vw;">
		<iframe src="../tictactoecmm" id="iframe" style="height: 100%; width: 100%;"></iframe>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script>
		let score = 0;
		const noms = ["first", "second", "third", "fourth", "fifth"];

		document.getElementById("first").addEventListener("submit", function(e) {
			e.preventDefault();
			checkAnswer("firstq", 12 * 13, "first", "second", 0);
		});

		document.getElementById("second").addEventListener("submit", function(e) {
			e.preventDefault();
			checkAnswer("secondq", 14 * 14, "second", "third", 1);
		});

		document.getElementById("third").addEventListener("submit", function(e) {
			e.preventDefault();
			checkAnswer("thirdq", 15 * 15, "third", "fourth", 2);
		});

		document.getElementById("fourth").addEventListener("submit", function(e) {
			e.preventDefault();
			checkAnswer("fourthq", 12 + 6, "fourth", "fifth", 3);
		});

		document.getElementById("fifth").addEventListener("submit", function(e) {
			e.preventDefault();
			checkAnswer("fifthq", 20 * 21, "fifth", null, 4);
		});

		function checkAnswer(inputId, correctAnswer, currentFormId, nextFormId, index) {
			let val = document.getElementById(inputId).value;
			if (val == correctAnswer) {
				score++;
				Swal.fire({
					title: "Good job!",
					text: "You are correct!",
					icon: "success"
				});
				document.getElementById(currentFormId).style.display = "none";
				if (nextFormId) {
					document.getElementById(nextFormId).style.display = "block";
					showIframe(index);
				} else {
					document.getElementById("hOne").textContent = "Well done! Your score: " + score;
				}
			} else {
				score--;
				Swal.fire({
					title: "You are incorrect.",
					text: "Please try again",
					icon: "error"
				});
			}
		}

		function showIframe(nom) {
			document.getElementById("iframe-wrapper").style.display = "block";
			document.getElementById("iframe-wrapper").addEventListener("click", hideIframe, { once: true });
			document.getElementById("iframe").contentWindow.addEventListener("focus", hideIframe, { once: true });

			function hideIframe() {
				document.getElementById("iframe-wrapper").style.display = "none";
				if (nom + 1 < noms.length) {
					document.getElementById(noms[nom + 1]).style.display = "block";
				}
			}
		}
	</script>
</body>
</html>
