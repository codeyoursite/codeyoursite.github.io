<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maths Game with Tic Tac Toe</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="../tictactoec/style.css" rel="stylesheet">
</head>
<body>
    <h1 id="hOne">Maths Game</h1>
    <form id="first">
        <label for="first">What's 12 x 13?</label>
        <input type="text" name="first" id="firstq">
        <input type="submit" value="Check">
    </form>
    <form id="second" style="display: none;">
        <label for="second">What's 14 squared?</label>
        <input type="text" name="second" id="secondq">
        <input type="submit" value="Check">
    </form>
    <form id="third" style="display: none;">
        <label for="third">What's 15 squared?</label>
        <input type="text" name="third" id="thirdq">
        <input type="submit" value="Check">
    </form>
    <form id="fourth" style="display: none;">
        <label for="fourth">What's 12 - -6?</label>
        <input type="text" name="fourth" id="fourthq">
        <input type="submit" value="Check">
    </form>
    <form id="fifth" style="display: none;">
        <label for="fifth">What's 20 x 21?</label>
        <input type="text" name="fifth" id="fifthq">
        <input type="submit" value="Check">
    </form>
    <!-- Add the Tic Tac Toe game here with display: none -->
    <h2>Tic Tac Toe</h2>
    <div class="board" id="board" style="display: none;">
        <img src="https://codeyoursite.github.io/fun/1Pzpe.png">
        <div class="grid">
            <div class="cross cell" id="one">W</div>
            <div class="cross cell" id="two">W</div>
            <div class="cross cell" id="three">W</div>
            <div class="cross cell" id="four">W</div>
            <div class="cross cell" id="five">W</div>
            <div class="cross cell" id="six">W</div>
            <div class="cross cell" id="seven">W</div>
            <div class="cross cell" id="eight">W</div>
            <div class="cross cell" id="nine">W</div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        let index = 0;
        let score = 0;
        const noms = ["first", "second", "third", "fourth", "fifth"];

        // Add event listener to each form for checking answers
        noms.forEach(formId => {
            document.getElementById(formId).addEventListener("submit", function(e) {
                e.preventDefault();
                const answerId = formId + "q";
                const correctAnswer = getCorrectAnswer(index);
                checkAnswer(answerId, correctAnswer, formId);
            });
        });

        // Function to get the correct answer based on the current index
        function getCorrectAnswer(index) {
            switch (index) {
                case 0:
                    return 12 * 13;
                case 1:
                    return 14 * 14;
                case 2:
                    return 15 * 15;
                case 3:
                    return 12 - (-6);
                case 4:
                    return 20 * 21;
                default:
                    return null;
            }
        }

        // Function to handle checking the answer
        function checkAnswer(inputId, correctAnswer, currentFormId) {
            let val = document.getElementById(inputId).value;
            if (val == correctAnswer) {
                score++;
                Swal.fire({
                    title: "Good job!",
                    text: "You are correct!",
                    icon: "success"
                }).then(() => {
                    document.getElementById(currentFormId).style.display = "none";
                    document.getElementById("board").style.display = "block";
                    // Add event listener to each cell for player's move
                    document.querySelectorAll(".cell").forEach(cell => {
                        cell.addEventListener("click", handleClick);
                    });
                });
            } else {
                score--;
                Swal.fire({
                    title: "You are incorrect.",
                    text: "Please try again",
                    icon: "error"
                });
            }
        }

        // Function to handle cell click
        function handleClick(event) {
            const clickedCell = event.target; // Get the clicked cell
            if (clickedCell.textContent == "W") {
                // Mark cell with player's symbol
                clickedCell.textContent = "X"; // Assuming the player always plays as X
                clickedCell.style.opacity = "100%";
                // Remove event listener to prevent further moves
                document.querySelectorAll(".cell").forEach(cell => {
                    cell.removeEventListener("click", handleClick);
                });
            } else {
                // Display error message if cell is already marked
                Swal.fire({
                    icon: "error",
                    title: "Choose a different space",
                    text: "The cell you clicked on has already been taken."
                });
            }
        }
    </script>
</body>
</html>